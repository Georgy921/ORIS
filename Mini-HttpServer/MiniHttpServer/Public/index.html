<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—É—Ä—ã –≤ –¢—É—Ä—Ü–∏—é</title>
    <link rel="stylesheet" href="index.css" />

       
</head>

<body>
    <div>
        <div class="main-wrapper">
            <header class="header">
                <!-- ... –≤–∞—à header –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... -->
                <div class="header-container">
                    <div class="header-top">
                        <a href="#" class="logo">
                            <img src="src/logo.png">
                        </a>
                        <nav class="header-nav" style="margin-right: 20px;">
                            <ul class="header-links" id="eproblema">
                                <li style="margin-right: 20px;"><a href="#">–ü–æ–¥–æ–±—Ä–∞—Ç—å —Ç—É—Ä</a></li>
                                <li><a href="#"><span><img src="src/expertOnlineIcon.svg" class="header--nav--icon"> –≠–∫—Å–ø–µ—Ä—Ç—ã online</span></a></li>
                                <li><a href="#">–û—Ñ–∏—Å—ã –ø—Ä–æ–¥–∞–∂</a></li>
                                <li><a href="#">–û –∫–æ–º–ø–∞–Ω–∏–∏</a></li>
                                <li><a href="#">–í—Ö–æ–¥ –¥–ª—è –∞–≥–µ–Ω—Å—Ç–≤</a></li>
                            </ul>
                        </nav>
                        <nav class="header-nav" style="padding-left: 2px;">
                            <ul class="header-links">
                                <li style="margin-right: 0px;"><a href="#"><img src="src/HeaderLocation.png" style="width: 15px; left: -19px; height: 22px;" class="header--nav--icon">–ú–æ—Å–∫–≤–∞</a></li>
                                <li><a href="#"><img src="src/phone.png" class="header--nav--icon">8 800 775 775 8</a></li>
                                <li><a href="#" onclick="showAuthModal(); return false;"><img id="auth-icon" src="src/BeforeAuthUser.png" style="transform: scale(0.75);" class="header--nav--icon"></a></li>
                                <li><a href="#"><img src="src/heart.png" style="transform: scale(0.75);" class="header--nav--icon"></a></li>
                                <li><a href="#"><img src="src/scales.png" style="transform: scale(0.75);" class="header--nav--icon"></a></li>
                                <li><a href="#"><img src="src/Basket.png" style="transform: scale(0.75);" class="header--nav--icon"></a></li>
                            </ul>
                        </nav>
                    </div>

                    <nav class="main-menu">
                        <ul>
                            <li><a href="#">–¢—É—Ä—ã</a></li>
                            <li><a href="#">–û—Ç–µ–ª–∏</a></li>
                            <li><a href="#">–ê–≤–∏–∞–±–∏–ª–µ—Ç—ã</a></li>
                            <li><a href="#">–≠–∫—Å–∫—É—Ä—Å–∏–æ–Ω–Ω—ã–µ —Ç—É—Ä—ã</a></li>
                            <li><a href="#">–ö—Ä—É–∏–∑—ã</a></li>
                            <li><a href="#">–ü–æ–∏—Å–∫ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º</a></li>
                            <li style="margin-right: 0px;"><a href="#" id="hot-links"><span class="fire-icon">üî•</span> –ì–æ—Ä—è—â–∏–µ —Ç—É—Ä—ã</a></li>
                        </ul>
                    </nav>
                </div>
            </header>

            <div class="search-form">
                <div class="search-field-wrapper">
                    <label class="floating-label">–û—Ç–∫—É–¥–∞</label>
                    <input type="text" class="input-field" id="from-field" value="" style="border-top-left-radius: 8px; border-bottom-left-radius: 8px;">
                </div>
                <div class="search-field-wrapper">
                    <label class="floating-label">–ö—É–¥–∞</label>
                    <input type="text" class="input-field" id="to-field" value="">
                </div>
                <div class="search-field-wrapper">
                    <label class="floating-label">–î–∞—Ç–∞ –≤—ã–ª–µ—Ç–∞</label>
                    <input type="text" class="input-field" id="date-field" value="">
                </div>
                <div class="search-field-wrapper">
                    <label class="floating-label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</label>
                    <input type="text" class="input-field" id="duration-field" value="">
                </div>
                <div class="search-field-wrapper">
                    <label class="floating-label">–ö—Ç–æ –µ–¥–µ—Ç</label>
                    <input type="text" class="input-field" id="people-field" value="">
                </div>
                <button class="search-btn">–ù–∞–π—Ç–∏</button>
            </div>

            <!-- –û–°–ù–û–í–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê: –§–ò–õ–¨–¢–†–´ + –¢–£–†–´ -->
            <div class="page-layout">

                <!-- –õ–ï–í–´–ô –ë–õ–û–ö: –§–ò–õ–¨–¢–†–´ -->
                <aside class="sidebar-filters">
                    <div class="map-preview">
                        <img src="src/maps.png" alt="–ö–∞—Ä—Ç–∞ –ï–≥–∏–ø—Ç–∞" class="map-image">
                        <button class="map-button" onclick="openMapModal()">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ</button>
                    </div>

                    <!-- –§–∏–ª—å—Ç—Ä 1: –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã -->
                    <div class="filter-section active">
                        <div class="filter-header" onclick="toggleFilter(this)">
                            <h3>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã</h3>
                            <img src="src/arrow_down.png" alt="–°–≤–µ—Ä–Ω—É—Ç—å" class="filter-arrow">
                        </div>
                        <div class="filter-content">
                            <div class="filter-group">
                                <label><input type="checkbox" value="all-inclusive"> –í—Å–µ –≤–∫–ª—é—á–µ–Ω–æ</label>
                                <label><input type="checkbox" value="wi-fi"> –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π Wi-Fi</label>
                                <label><input type="checkbox" value="first-line"> 1-—è –±–µ—Ä–µ–≥–æ–≤–∞—è –ª–∏–Ω–∏—è</label>
                                <label><input type="checkbox" value="beach"> –ü–ª—è–∂–Ω—ã–π –æ—Ç–¥—ã—Ö</label>
                                <label><input type="checkbox" value="regular-flight"> –†–µ–≥—É–ª—è—Ä–Ω—ã–π –ø–µ—Ä–µ–ª–µ—Ç</label>
                            </div>
                        </div>
                    </div>

                    <!-- –§–∏–ª—å—Ç—Ä 2: –°—Ç–æ–∏–º–æ—Å—Ç—å -->
                    <div class="filter-section active">
                        <div class="filter-header" onclick="toggleFilter(this)">
                            <h3>–°—Ç–æ–∏–º–æ—Å—Ç—å</h3>
                            <img src="src/arrow_down.png" alt="–°–≤–µ—Ä–Ω—É—Ç—å" class="filter-arrow">
                        </div>
                        <div class="filter-content">
                            <div class="price-slider-container">
                                <div class="price-slider-track">
                                    <div class="price-slider-fill" id="priceFill"></div>
                                </div>
                                <input type="range" id="min-price" min="0" max="2000000" value="0" step="1" />
                                <input type="range" id="max-price" min="0" max="2000000" value="2000000" step="1" />
                            </div>
                            <div class="price-values">
                                <span id="minPriceValue">0 ‚ÇΩ</span>
                                <span id="maxPriceValue">2000000 ‚ÇΩ</span>
                            </div>
                        </div>
                    </div>

                    <!-- –§–∏–ª—å—Ç—Ä 3: –ü–æ–∏—Å–∫ –æ—Ç–µ–ª—è -->
                    <div class="filter-section active">
                        <div class="filter-header" onclick="toggleFilter(this)">
                            <h3>–ü–æ–∏—Å–∫ –æ—Ç–µ–ª—è</h3>
                            <img src="src/arrow_down.png" alt="–°–≤–µ—Ä–Ω—É—Ç—å" class="filter-arrow">
                        </div>
                        <div class="filter-content">
                            <input type="text" id="hotel-search" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ç–µ–ª—è" class="search-input">
                        </div>
                    </div>
                    <!--—Ä–µ–≥–∏–æ–Ω—ã –∏ –∫—É—Ä–æ—Ä—Ç—ã —Ç–æ–∂ —Ñ–∏–ª—å—Ç—Ä-->
                    <div class="filter-section active">
                        <div class="filter-header" onclick="toggleFilter(this)">
                            <h3>–†–µ–≥–∏–æ–Ω—ã –∏ –∫—É—Ä–æ—Ä—Ç—ã</h3>
                            <img src="src/arrow_down.png" alt="–°–≤–µ—Ä–Ω—É—Ç—å" class="filter-arrow">
                        </div>
                        <div class="filter-content">
                            <div class="filter-group">
                                <label><input type="checkbox" value="–ê–ª–∞–Ω—å—è"> –ê–ª–∞–Ω—å—è</label>
                                <label><input type="checkbox" value="–ê–Ω—Ç–∞–ª—å—è"> –ê–Ω—Ç–∞–ª—å—è</label>
                                <label><input type="checkbox" value="–ë–µ–ª–µ–∫"> –ë–µ–ª–µ–∫</label>
                                <label><input type="checkbox" value="–ë–æ–¥—Ä—É–º"> –ë–æ–¥—Ä—É–º</label>
                                <label><input type="checkbox" value="–î–∞–ª–∞–º–∞–Ω"> –î–∞–ª–∞–º–∞–Ω</label>
                                <label><input type="checkbox" value="–ö–µ–º–µ—Ä"> –ö–µ–º–µ—Ä</label>
                                <label><input type="checkbox" value="–°–∏–¥–µ"> –°–∏–¥–µ</label>
                                <label><input type="checkbox" value="–°—Ç–∞–º–±—É–ª"> –°—Ç–∞–º–±—É–ª</label>
                                <label><input type="checkbox" value="–§–µ—Ç—Ö–∏–µ"> –§–µ—Ç—Ö–∏–µ</label>
                                <label><input type="checkbox" value="–≠—Ä–∑—É—Ä—É–º"> –≠—Ä–∑—É—Ä—É–º</label>
                            </div>
                        </div>
                    </div>
                    <!--—Ä–µ–≥–∏–æ–Ω—ã –∏ –∫—É—Ä–æ—Ä—Ç—ã —Ç–æ–∂ —Ñ–∏–ª—å—Ç—Ä-->
                    <div class="filter-section active">
                        <div class="filter-header" onclick="toggleFilter(this)">
                            <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏—è –æ—Ç–µ–ª—è</h3>
                            <img src="src/arrow_down.png" alt="–°–≤–µ—Ä–Ω—É—Ç—å" class="filter-arrow">
                        </div>
                        <div class="filter-content">
                            <div class="filter-group">
                                <label><input type="checkbox" value="5"> 5‚òÖ</label>
                                <label><input type="checkbox" value="4"> 4‚òÖ</label>
                                <label><input type="checkbox" value="3"> 3‚òÖ</label>
                                <label><input type="checkbox" value="2"> 2‚òÖ</label>
                                <label><input type="checkbox" value="1"> –ë–µ–∑ –∑–≤–µ–∑–¥</label>
                            </div>
                        </div>
                    </div>

                    <div class="filter-section active">
                        <div class="filter-header" onclick="toggleFilter(this)">
                            <h3>–ü–∏—Ç–∞–Ω–∏–µ</h3>
                            <img src="src/arrow_down.png" alt="–°–≤–µ—Ä–Ω—É—Ç—å" class="filter-arrow">
                        </div>
                        <div class="filter-content">
                            <div class="filter-group">
                                <label><input type="checkbox" value="ultra_all"> –£–ª—å—Ç—Ä–∞ –≤—Å–µ –≤–∫–ª—é—á–µ–Ω–æ</label>
                                <label><input type="checkbox" value="all"> –í—Å–µ –≤–∫–ª—é—á–µ–Ω–æ</label>
                                <label><input type="checkbox" value="breakfest"> –ó–∞–≤—Ç—Ä–∞–∫</label>
                                <label><input type="checkbox" value="without_food"> –ë–µ–∑ –ø–∏—Ç–∞–Ω–∏—è</label>
                                <label><input type="checkbox" value="pansion"> –ü–æ–ª—É–ø–∞–Ω—Å–∏–æ–Ω</label>
                                <label><input type="checkbox" value="full_pansion"> –ü–æ–ª–Ω—ã–π –ø–∞–Ω—Å–∏–æ–Ω</label>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- –ü–†–ê–í–´–ô –ë–õ–û–ö: –¢–£–†–´ -->
                <main class="main-content">
                    <div class="container" style="padding-left: 0;">
                        <h2 class="section-title" id="remove_search">–¢—É—Ä—ã –≤ –¢—É—Ä—Ü–∏—é –Ω–∞–π–¥–µ–Ω–æ ${HotTours.Count} –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π</h2>

                        <div class="hot-tours-container">
                            <div class="tours-slider" id="hot-tours-slider" style="overflow-x: hidden; display: ">
                                $foreach(var tour in HotTours)
                                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç—É—Ä–∞ -->
                                <div class="tour-card" onclick="window.open('/tours/details?id=${tour.id}', '_blank')" style="display: flex; background: white; cursor:pointer; border-radius: 14px; overflow-x: hidden; border: 1px solid #ddd; margin-bottom: 16px; width: 895px;">

                                    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ª–µ–≤–∞ -->
                                    <div class="card-image" style="position: relative; overflow: hidden;">
                                        <!-- –í—Å—Ç–∞–≤–ª—è–µ–º URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ -->
                                        <img src="${tour.image_url}" alt="${tour.hotel_name}" style="width: 100%; height: 100%; object-fit: cover;">

                                        <div style="position: absolute; top: 8px; left: 8px; background: white; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2">
                                                <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z" />
                                            </svg>
                                        </div>

                                        <div class="labels" style="position: absolute; top: 8px; right: 8px; display: flex; flex-direction: column; gap: 4px;">
                                            <!-- –ë–µ–π–¥–∂ "–æ—Ç X" -->
                                            <div style="background: #ECECFD; color: #FF5722; padding: 4px 4px; border-radius: 14px; font-size: 12px; font-weight: bold; display: flex; align-items: center; gap: 4px;">
                                                <img src="src/bonus.png" alt="bonus" style="max-height: 20px; max-width: 20px;">
                                                –æ—Ç ${tour.bonus}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–ø—Ä–∞–≤–∞ -->
                                    <div class="card-info" style="flex: 1; padding: 16px 16px 0 16px; display: flex; flex-direction: column; justify-content: space-between;">

                                        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ä–µ–π—Ç–∏–Ω–≥ -->
                                        <div>
                                            <h3 style="font-size: 18px; font-weight: bold; margin: 0 0 4px 0; color: #333;">${tour.hotel_name}</h3>
                                            <div style="font-size: 14px; color: #666; margin-bottom: 12px;">
                                                ${tour.arrival_city}, ${tour.name}
                                            </div>
                                        </div>

                                        <div style="display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 12px; font-size: 13px; color: #555;">

                                            $if(tour.wifi)
                                            <div class="services-icon">
                                                <img src="src/wifi.png" alt="wifi">
                                                ${tour.wifi}
                                            </div>
                                            $endif

                                            $if(tour.distance_to_airport)
                                            <div class="services-icon">
                                                <img src="src/planes.png" alt="plane">
                                                –ù–µ –¥–∞–ª–µ–µ ${tour.distance_to_airport} –∫–º –æ—Ç –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞
                                            </div>
                                            $endif

                                            $if(tour.has_kids_club)
                                            <div class="services-icon">
                                                <img src="src/kids_club.png" alt="–î–µ—Ç—Å–∫–∏–π">
                                                –î–µ—Ç—Å–∫–∏–π –∫–ª—É–±
                                            </div>
                                            $endif

                                            $if(tour.has_aquapark)
                                            <div class="services-icon">
                                                <img src="src/aquapark.png" alt="aquapark">
                                                –ê–∫–≤–∞–ø–∞—Ä–∫
                                            </div>
                                            $endif

                                            $if(tour.has_spa)
                                            <div class="services-icon">
                                                <img src="src/Spa.png" alt="spa">
                                                SPA-—Ü–µ–Ω—Ç—Ä
                                            </div>
                                            $endif

                                            $if(tour.room_type)
                                            <div class="services-icon">
                                                <img src="src/bedroom.png" alt="bedroom">
                                                ${tour.room_type}
                                            </div>
                                            $endif
                                        </div>

                                        <!-- –î–∞—Ç—ã –∏ —Å–æ—Å—Ç–∞–≤ -->
                                        <div style="display: flex; align-items: center; gap: 12px; font-size: 14px; color: #555; margin-bottom: 8px;">
                                            <div style="display: flex; align-items: center; gap: 4px; font-size: 16px; color: #333;">
                                                <img src="src/plane_depart.png" alt="plane_depart">
                                                ${tour.departure_date}
                                                <div>‚Ä¢</div>
                                                <div>${tour.adults_count} –≤–∑—Ä–æ—Å–ª—ã—Ö</div>
                                                <div>‚Ä¢</div>
                                                <div>${tour.nights_count} –Ω–æ—á–µ–π</div>
                                            </div>
                                        </div>

                                        <!-- –¶–µ–Ω–∞ –∏ –∫–Ω–æ–ø–∫–∞ -->
                                        <div style="display: flex; align-items: center; justify-content: space-between; padding-bottom: 16px;">
                                            <!-- –°–ª–µ–≤–∞: —Ü–µ–Ω–∞ –≤ —Ä–∞—Å—Å—Ä–æ—á–∫—É -->
                                            <div style="font-size: 14px; color: #444; display: flex; align-items: center; gap: 4px;">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14l-4-4h2v-4h4v4h2l-4 4z" />
                                                </svg>
                                                –ß–∞—Å—Ç—è–º–∏, –≤ —Ä–∞—Å—Å—Ä–æ—á–∫—É –∏–ª–∏ –∫—Ä–µ–¥–∏—Ç –æ—Ç ${tour.monthly_payment} ‚ÇΩ/–º–µ—Å.
                                            </div>

                                            <!-- –°–ø—Ä–∞–≤–∞: –∫–Ω–æ–ø–∫–∞ —Ü–µ–Ω—ã -->
                                            <button id="card-price" style="background: #ffe135; color: #333; border: none; padding: 8px 16px; border-radius: 8px; font-weight: bold; font-size: 16px; cursor: pointer; min-width: 150px; min-height: 50px; text-align: center;">
                                                –æ—Ç ${tour.tour_price} ‚ÇΩ
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                $endfor
                            </div>
                        </div>
                    </div>
                </main>

            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <!-- –°–µ–∫—Ü–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ -->
                <div class="footer-subscribe">
                    <div class="subscribe-text">
                        <h3>–ë—É–¥—å –≤ –∫—É—Ä—Å–µ</h3>
                        <p>–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –≤—ã–≥–æ–¥–Ω—ã–µ —Ç—É—Ä—ã –Ω–∞ —Å–≤–æ—é –ø–æ—á—Ç—É</p>
                    </div>
                    <div class="subscribe-form">
                        <input type="email" placeholder="Email" class="subscribe-input">
                        <button class="subscribe-btn">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è</button>
                    </div>
                    <p class="subscribe-note">–ù–∞–∂–∏–º–∞—è ¬´–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è¬ª –≤—ã –¥–∞—ë—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É <a href="#">–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.</a></p>
                </div>

                <div class="footer-divider"></div>

                <!-- –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å footer -->
                <div class="footer-main">
                    <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
                    <div class="footer-left">
                        <div class="footer-logo-section">
                            <img src="src/logo1.png" alt="FUN&SUN" class="footer-logo">
                            <div class="contact-info">
                                <div class="footer-phone">8 800 775 775 8</div>
                                <div class="footer-socials">
                                    <a href="#" class="social-icon"><img src="src/vk.png" alt="VK"></a>
                                    <a href="#" class="social-icon"><img src="src/tg.png" alt="Telegram"></a>
                                    <a href="#" class="social-icon"><img src="src/tiktok.png" alt="tiktol"></a>
                                    <a href="#" class="social-icon"><img src="src/youtube.png" alt="youtube"></a>
                                </div>
                            </div>
                        </div>

                        <div class="footer-app">
                            <div class="app-text">
                                <strong>–ß–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–¥–æ–±–Ω–µ–µ!</strong>
                                <p>–ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞ –Ω–∞ QR-–∫–æ–¥ –∏ —Å–∫–∞—á–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ FUN&SUN</p>
                            </div>
                            <img src="src/qr-code.png" alt="QR-–∫–æ–¥" class="app-qr">
                        </div>

                        <div class="footer-currency">
                            <div class="currency-item">
                                <img src="https://fstravel.com/storage/images/eur.png" alt="EUR" class="currency-flag">
                                <span class="currency-code">EUR</span>
                                <span class="currency-value">96.8</span>
                            </div>
                            <div class="currency-item">
                                <img src="https://fstravel.com/storage/images/usd1.png" alt="USD" class="currency-flag">
                                <span class="currency-code">USD</span>
                                <span class="currency-value">81.5</span>
                            </div>
                        </div>
                        <a href="#" class="currency-history">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫—É—Ä—Å–∞</a>

                        <p class="footer-disclaimer">
                            –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è –Ω–∞ —Å–∞–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–æ—Å–∏—Ç —Å–ø—Ä–∞–≤–æ—á–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω–æ–π –æ—Ñ–µ—Ä—Ç–æ–π. 
                            ¬©2026, FUN&SUN<br>
                            <a href="#" class="legal-link">–ü—Ä–∞–≤–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</a>
                        </p>
                    </div>

                    <!-- –ö–æ–ª–æ–Ω–∫–∞ "–û—Ç–¥—ã—Ö" -->
                    <div class="footer-column">
                        <h4>–û—Ç–¥—ã—Ö</h4>
                        <ul>
                            <li><a href="#">–¢—É—Ä—ã</a></li>
                            <li><a href="#">–û—Ç–µ–ª–∏</a></li>
                            <li><a href="#">–≠–∫—Å–∫—É—Ä—Å–∏–æ–Ω–Ω—ã–µ —Ç—É—Ä—ã</a></li>
                            <li><a href="#">–ê–≤–∏–∞–±–∏–ª–µ—Ç—ã</a></li>
                            <li><a href="#">–ì–æ—Ä—è—â–∏–µ —Ç—É—Ä—ã</a></li>
                            <li><a href="#">–¢—É—Ä—ã –ø–æ –†–æ—Å—Å–∏–∏</a></li>
                            <li><a href="#">–¢—É—Ä—ã –Ω–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö —Ä–µ–π—Å–∞—Ö</a></li>
                        </ul>
                    </div>

                    <!-- –ö–æ–ª–æ–Ω–∫–∞ "FUN&SUN" -->
                    <div class="footer-column">
                        <h4>FUN&SUN</h4>
                        <ul>
                            <li><a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                            <li><a href="#">–û –Ω–∞—Å</a></li>
                            <li><a href="#">–ù–æ–≤–æ—Å—Ç–∏</a></li>
                            <li><a href="#">–û—Ñ–∏—Å—ã –ø—Ä–æ–¥–∞–∂</a></li>
                            <li><a href="#">–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏</a></li>
                            <li><a href="#">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</a></li>
                            <li><a href="#">–ê–∫—Ü–∏–∏</a></li>
                            <li><a href="#">–£—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã</a></li>
                            <li><a href="#">–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</a></li>
                            <li><a href="#">–î–µ–ª–æ–≤—ã–µ –ø–æ–µ–∑–¥–∫–∏ –∏ MICE</a></li>
                        </ul>
                    </div>

                    <!-- –ö–æ–ª–æ–Ω–∫–∞ "–ü–æ–º–æ—â—å" -->
                    <div class="footer-column">
                        <h4>–ü–æ–º–æ—â—å</h4>
                        <ul>
                            <li><a href="#">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞</a></li>
                            <li><a href="#">–†–∞–≤–Ω–æ–∑–Ω–∞—á–Ω—ã–π —Ç—É—Ä–ø—Ä–æ–¥—É–∫—Ç</a></li>
                            <li><a href="#">–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –æ—Ç–¥–µ–ª</a></li>
                            <li><a href="#">–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ —Å–ª—É–∂–±—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</a></li>
                            <li><a href="#">–ü—Ä–∞–≤–∏–ª–∞ –≤—ä–µ–∑–¥–∞</a></li>
                            <li><a href="#">–í–∏–∑—ã</a></li>
                            <li><a href="#">–ö–∞–∫ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç—É—Ä –æ–Ω–ª–∞–π–Ω?</a></li>
                            <li><a href="#">–£—Å–ª–æ–≤–∏—è –æ—Ç–º–µ–Ω—ã —Ç—É—Ä–∞</a></li>
                            <li><a href="#">–ü—Ä–∞–≤–∏–ª–∞ –ø–æ–∫—É–ø–∫–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–∞–º–æ–ª–µ—Ç, –∂/–¥ –ø–æ–µ–∑–¥ –∏ –∞–≤—Ç–æ–±—É—Å –±–µ–∑ —Ç—É—Ä–∞</a></li>
                            <li><a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –≤ –æ–±–ª–∞—Å—Ç–∏ –∑–∞—â–∏—Ç—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</a></li>
                        </ul>
                    </div>
                </div>

                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ -->
                <div class="footer-links-bottom">
                    <a href="#">–ö—Ä—É–∏–∑—ã</a>
                    <a href="#">–°—Ç—Ä–∞–Ω—ã</a>
                    <a href="#">–ù–æ–≤–æ—Å—Ç–∏ —Ç—É—Ä–∏–∑–º–∞</a>
                </div>

                <div class="footer-divider"></div>

                <!-- Cookie -->
                <div class="footer-cookie">
                    <p>
                        –î–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å —Å–∞–π—Ç–æ–º, –û–û–û –¢–¢-–¢—Ä—ç–≤–µ–ª 
                        <a href="#">–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∞–π–ª—ã cookie</a>. –ü—Ä–æ–¥–æ–ª–∂–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à —Å–∞–π—Ç, –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —É—Å–ª–æ–≤–∏—è 
                        –°–æ–≥–ª–∞—à–µ–Ω–∏—è –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö. 
                        <a href="#">–ï—Å–ª–∏ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å, –æ—Ç–∫–ª—é—á–∏—Ç–µ cookie –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞</a>
                    </p>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–≤–µ—Ä—Ö -->
            <button class="scroll-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
                <img src="src/scroll_up.png" alt="–ù–∞–≤–µ—Ä—Ö">
            </button>
        </footer>
        
        <div id="auth-modal" style="display:none; 
                            position:fixed; 
                            top:0; left:0; 
                            width:100%; height:100%; 
                            background:rgba(0,0,0,0.5); 
                            z-index:1000; 
                            justify-content:center; 
                            align-items:center;"
                            onclick="if(event.target === this) hideAuthModal()">
            <div style="background:white;
                        padding:30px;
                        width:500px;
                        max-width:90%;
                        max-height:90vh;
                        overflow-y:auto;
                        border-radius:12px;
                        box-shadow:0 4px 20px rgba(0,0,0,0.1);">
                <!-- –≤–∞—à–∞ —Ñ–æ—Ä–º–∞ -->
                <div style="margin-bottom:20px;">
                    <input type="text" id="auth-username" placeholder="–ò–º—è" style="width:100%; padding:12px 16px; border:1px solid #ddd; border-radius:8px; font-size:16px; margin-bottom:10px; box-sizing:border-box;">
                    <input type="email" id="auth-email" placeholder="Email" style="width:100%; padding:12px 16px; border:1px solid #ddd; border-radius:8px; font-size:16px; margin-bottom:10px; box-sizing:border-box;">
                    <div style="position:relative;">
                        <input type="password" id="auth-password" placeholder="–ü–∞—Ä–æ–ª—å" style="width:100%; padding:12px 16px; border:1px solid #ddd; border-radius:8px; font-size:16px; box-sizing:border-box;">
                        <div style="position:absolute; right:10px; top:50%; transform:translateY(-50%); cursor:pointer; color:#999;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                                <path d="M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            </svg>
                        </div>
                    </div>
                    <a href="#" style="display:block; text-align:right; color:#007bff; font-size:14px; margin-top:5px; text-decoration:none;">–ù–µ –ø–æ–º–Ω—é –ø–∞—Ä–æ–ª—å</a>
                </div>
                <div style="display: flex; align-items: center; margin: 15px 0;">
                    <input type="checkbox" id="remember-me" style="width: 18px; height: 18px; margin-right: 8px;">
                    <label for="remember-me" style="font-size: 14px; color: #666; cursor: pointer;">
                        –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è
                    </label>
                </div>
                <button onclick="submitAuth()" style="width:100%; padding:14px; background:#FFD700; color:#333; border:none; border-radius:8px; font-size:16px; font-weight:bold; margin-bottom:15px; cursor:pointer;">
                    –í–æ–π—Ç–∏
                </button>
                <div style="display:flex; align-items:center; margin:15px 0; color:#999;">
                    <div style="flex:1; height:1px; background:#e0e0e0;"></div>
                    <span style="margin:0 10px; font-size:14px;">–∏–ª–∏</span>
                    <div style="flex:1; height:1px; background:#e0e0e0;"></div>
                </div>
                <div style="display:flex; gap:10px; margin-bottom:20px;">
                    <button style="flex:1; padding:12px; background:#000; color:white; border:none; border-radius:8px; font-size:14px; display:flex; align-items:center; justify-content:center; cursor:pointer;">
                        <img src="src/yandex_icon.png" alt="–Ø–Ω–¥–µ–∫—Å" style="margin-right:8px;">
                        <span>–í–æ–π—Ç–∏ —Å –Ø–Ω–¥–µ–∫—Å ID</span>
                    </button>
                    <button style="flex:1; padding:12px; background:#000; color:white; border:none; border-radius:8px; font-size:14px; display:flex; align-items:center; justify-content:center; cursor:pointer;">
                        <span style="margin-right:4px;">–í–æ–π—Ç–∏ —Å</span>
                        <img src="src/wb_ID.png" alt="WB">
                    </button>
                </div>
            </div>
        </div>


        
    </div>

   

    <script>
        // === –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–∞–π–¥–µ—Ä–∞ —Ü–µ–Ω ===
        const minPriceInput = document.getElementById('min-price');
        const maxPriceInput = document.getElementById('max-price');
        const minPriceValue = document.getElementById('minPriceValue');
        const maxPriceValue = document.getElementById('maxPriceValue');
        const priceFill = document.getElementById('priceFill');

        const API_URL = 'controllers/tours';

        function formatPrice(price) {
            return parseInt(price).toLocaleString('ru-RU') + ' ‚ÇΩ';
        }

        function updatePriceSlider() {
            let min = parseInt(minPriceInput.value);
            let max = parseInt(maxPriceInput.value);
            const minRange = parseInt(minPriceInput.min);
            const maxRange = parseInt(maxPriceInput.max);

            if (min > max) [min, max] = [max, min];
            minPriceInput.value = min;
            maxPriceInput.value = max;

            minPriceValue.textContent = formatPrice(min);
            maxPriceValue.textContent = formatPrice(max);

            const minPercent = ((min - minRange) / (maxRange - minRange)) * 100;
            const maxPercent = ((max - minRange) / (maxRange - minRange)) * 100;
            priceFill.style.left = minPercent + '%';
            priceFill.style.right = (100 - maxPercent) + '%';
        }

        // === –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä ===
        async function sendFiltersToServer() {
            try {
                const searchForm = document.querySelector('.search-form');
                const from = searchForm?.querySelector('#from-field')?.value?.trim() || '';
                const to = searchForm?.querySelector('#to-field')?.value?.trim() || '';
                const date = searchForm?.querySelector('#date-field')?.value?.trim() || '';
                const duration = searchForm?.querySelector('#duration-field')?.value?.trim() || '';
                const people = searchForm?.querySelector('#people-field')?.value?.trim() || '';

                const filterSections = document.querySelectorAll('.filter-section');
                const checkboxFilters = {};
                filterSections.forEach(section => {
                    const headerText = section.querySelector('.filter-header h3')?.textContent?.trim() || '';
                    const checkboxes = section.querySelectorAll('input[type="checkbox"]:checked');
                    if (checkboxes.length > 0) {
                        checkboxFilters[headerText] = Array.from(checkboxes).map(cb => cb.value);
                    }
                });

                const minPrice = parseInt(document.getElementById('min-price')?.value) || 0;
                const maxPrice = parseInt(document.getElementById('max-price')?.value) || 2000000;
                const hotelSearch = document.getElementById('hotel-search')?.value?.trim() || '';

                const payload = {
                    search: { from, to, date, duration, people },
                    filters: checkboxFilters,
                    price: { min: minPrice, max: maxPrice },
                    hotel_search: hotelSearch
                };

                console.log('[Filter Sync] Sending:', payload);
                const response = await fetch('/tours/filters', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                console.log('üì• –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', result); // ‚Üê –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –ª–æ–≥
                console.log('üì• result.tours:', result.tours);

                if (result.success) {
                    renderTours(result.tours); // üî• –í–æ—Ç –∑–¥–µ—Å—å –º–∞–≥–∏—è!
                }
                return result;
            } catch (error) {
                console.error('[Filter Sync ERROR]', error);
                throw error;
            }
        }

        let filterTimeout;
        minPriceInput?.addEventListener('input', () => {
            updatePriceSlider();
            clearTimeout(filterTimeout);
            filterTimeout = setTimeout(sendFiltersToServer, 200); // Debounce 300ms
        });

        maxPriceInput?.addEventListener('input', () => {
            updatePriceSlider();
            clearTimeout(filterTimeout);
            filterTimeout = setTimeout(sendFiltersToServer, 200);
        });

        function renderTours(tours) {
            const slider = document.getElementById('hot-tours-slider');
            const res = document.getElementById('remove_search');

            // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
            if (!slider) {
                console.error('‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: –≠–ª–µ–º–µ–Ω—Ç #hot-tours-slider –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ DOM!');
                return;
            }

            // 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
            if (tours.length == 0) {
                res.textContent = `–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ`;
            }
            else res.textContent = `–ù–∞–π–¥–µ–Ω–æ –æ—á –º–Ω–æ–≥–æ —á–µ–≥–æ`

            try {
                // 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –æ—à–∏–±–æ–∫ –¥–∞–Ω–Ω—ã—Ö
                slider.innerHTML = tours.map(tour => {

                    console.log(tour.hotel_name);
                    console.log(tour.hotel_name);
                    console.log(tour.hotel_name);
                    console.log(`<div class="tour-card">
        <img src="${tour.image_url}" alt="${tour.hotel_name}">`);
                    console.log(`${hotel_name}`)
                    console.log(`${tour.hotelname}`);
                    console.log(`${hotelname}`)

                    // –ó–∞—â–∏—Ç–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –ø–æ–ª–µ null, –±—É–¥–µ—Ç –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ 0)
                    const imgUrl = tour.image_url;
                    const hotelName = tour.hotel_name || '–û—Ç–µ–ª—å –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
                    const arrivalCity = tour.arrival_city || '';
                    const tourName = tour.name || '';
                    const bonus = tour.bonus || 0;
                    const price = parseFloat(tour.tour_price) || 0;
                    const monthly = Math.floor(price / 6);

                    // –§–æ—Ä–º–∏—Ä—É–µ–º –∏–∫–æ–Ω–∫–∏ —É—Å–ª—É–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ
                    const servicesHtml = [];

                    if (tour.wifi && String(tour.wifi).toLowerCase() !== '–Ω–µ—Ç') {
                        servicesHtml.push(`<div class="services-icon"><img src="src/wifi.png" alt="wifi"><span>` + tour.wifi + `</span></div>`);
                    }
                    if (tour.distance_to_airport) {
                        servicesHtml.push(`<div class="services-icon"><img src="src/plane_depart.png" alt="plane" ><span>–ù–µ –¥–∞–ª–µ–µ ` + tour.distance_to_airport + ` –∫–º –æ—Ç –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞</span></div>`);
                    }
                    if (tour.has_kids_club) {
                        servicesHtml.push(`<div class="services-icon"><img src="src/kids_club.png" alt="kids"><span>–î–µ—Ç—Å–∫–∏–π –∫–ª—É–±</span></div>`);
                    }
                    if (tour.has_aquapark) {
                        servicesHtml.push(`<div class="services-icon"><img src="src/aquapark.png" alt="aquapark" ><span>–ê–∫–≤–∞–ø–∞—Ä–∫</span></div>`);
                    }
                    if (tour.has_spa) {
                        servicesHtml.push(`<div class="services-icon"><img src="src/Spa.png" alt="spa" ><span>SPA-—Ü–µ–Ω—Ç—Ä</span></div>`);
                    }
                    if (tour.room_type) {
                        servicesHtml.push(`<div class="services-icon"><img src="src/bedroom.png" alt="room" ><span>` + tour.room_type + `</span></div>`);
                    }

                    // –°–±–æ—Ä–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
                    return `
                <div class="tour-card" onclick="window.open('/tours/details?id=${tour.id}', '_blank')" style="display: flex; background: white; border-radius: 14px; overflow: hidden; border: 1px solid #ddd; margin-bottom: 16px; width: 910px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                    <div class="card-image" style="position: relative; overflow: hidden; width: 230px; height: 312px; flex-shrink: 0; background: #f0f0f0;">
                        <img src="`+ imgUrl + `"
                             alt="`+ hotelName + `"
                             style="width: 100%; height: 100%; object-fit: cover;"

                        <!-- –ö–Ω–æ–ø–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ -->
                        <div style="position: absolute; top: 8px; left: 8px; background: white; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); z-index: 2;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2">
                                <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z" />
                            </svg>
                        </div>

                        <!-- –ë–µ–π–¥–∂ –±–æ–Ω—É—Å–∞ -->
                        <div class="labels" style="position: absolute; top: 8px; right: 8px; display: flex; flex-direction: column; gap: 4px; z-index: 2;">
                            <div style="background: #ECECFD; color: #FF5722; padding: 4px 4px; border-radius: 14px; font-size: 12px; font-weight: bold; display: flex; align-items: center; gap: 4px; white-space: nowrap;">
                                <img src="src/bonus.png" alt="bonus" style="max-height: 16px; max-width: 16px;">
                                –æ—Ç `+ bonus + `
                            </div>
                        </div>
                    </div>

                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div class="card-info" style="flex: 1; padding: 16px; display: flex; flex-direction: column; justify-content: space-between;">
                        <div>
                            <h3 style="font-size: 18px; font-weight: bold; margin: 0 0 4px 0; color: #333;">`+ hotelName + `</h3>
                            <div style="font-size: 14px; color: #666; margin-bottom: 12px;">
                                `+ arrivalCity + ` ` + tourName + `
                            </div>
                        </div>

                        <!-- –ò–∫–æ–Ω–∫–∏ -->
                        <div style="display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 12px; font-size: 13px; color: #555;">
                            `+ servicesHtml.join('') + `
                        </div>

                        <!-- –î–∞—Ç—ã -->
                        <div style="display: flex; align-items: center; gap: 12px; font-size: 14px; color: #555; margin-bottom: 8px;">
                            <div style="display: flex; align-items: center; gap: 6px; font-size: 16px; color: #333;">
                                <img src="src/plane_depart.png" alt="plane">
                                <span>`+ tour.departure_date + `</span>
                                <span>‚Ä¢</span>
                                <span>`+ tour.adults_count + ` –≤–∑—Ä–æ—Å–ª—ã—Ö.</span>
                                <span>‚Ä¢</span>
                                <span>`+ tour.nights_count + ` –Ω–æ—á–µ–π</span>
                            </div>
                        </div>

                        <!-- –¶–µ–Ω–∞ –∏ –∫–Ω–æ–ø–∫–∞ -->
                        <div style="display: flex; align-items: center; justify-content: space-between; ">
                            <div style="font-size: 14px; color: #333; display: flex; align-items: center; gap: 4px;">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14l-4-4h2v-4h4v4h2l-4 4z" />
                                </svg>
                                <span>–ß–∞—Å—Ç—è–º–∏, –≤ —Ä–∞—Å—Å—Ä–æ—á–∫—É –∏–ª–∏ –∫—Ä–µ–¥–∏—Ç –æ—Ç `+ monthly.toLocaleString('ru-RU') + ` ‚ÇΩ/–º–µ—Å.</span>
                            </div>

                            <button style="background: #ffe135; color: #333; border: none; padding: 10px 24px; border-radius: 8px; font-weight: bold; font-size: 16px; cursor: pointer; min-width: 140px; transition: background 0.2s;"
                                    onmouseover="this.style.background='#ffd700'" onmouseout="this.style.background='#ffe135'">
                                –æ—Ç `+ price.toLocaleString('ru-RU') + ` ‚ÇΩ
                            </button>
                        </div>
                    </div>
                </div>`;
                }).join('');

                console.log(`‚úÖ –£—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω–æ ` + tours.length + ` –∫–∞—Ä—Ç–æ—á–µ–∫.`);

            } catch (e) {
                console.error('üí• –û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTML:', e);
            }
        }

        // === –ê–∫–∫–æ—Ä–¥–µ–æ–Ω —Ñ–∏–ª—å—Ç—Ä–æ–≤ ===
        function toggleFilter(header) {
            header.parentElement.classList.toggle('active');
        }



        // === –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ===
        function showAuthModal() {
            document.getElementById('auth-modal').style.display = 'flex';
        }
        function hideAuthModal() {
            document.getElementById('auth-modal').style.display = 'none';
        }


        async function submitAuth() {
            const username = document.getElementById('auth-username')?.value.trim() || '';
            const email = document.getElementById('auth-email')?.value.trim() || '';
            const password = document.getElementById('auth-password')?.value || '';
            const rememberMe = document.getElementById('remember-me')?.checked || false;

            if (!email || !password) {
                alert("Email –∏ –ø–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã.");
                return;
            }

            const payload = {
                email,
                password,
                rememberMe: rememberMe.toString() // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∫ —Å—Ç—Ä–æ–∫—É "true"/"false"
            };

            if (username) {
                payload.username = username;
            }

            try {
                const res = await fetch('/auth/auth', { // –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å: '/auth' –∏–ª–∏ '/login/auth'
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload),
                    credentials: 'include' // üî• –í–∞–∂–Ω–æ –¥–ª—è cookies
                });

                const data = await res.json();

                if (data.success) {
                    // –û–±–Ω–æ–≤–ª—è–µ–º UI
                    updateAuthUI(true, data.user);
                    hideAuthModal();

                    // –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–∫–µ–Ω (—Ö–æ—Ç—è –∫—É–∫–∞ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å–µ—Ä–≤–µ—Ä–æ–º)
                    if (data.token) {
                        console.log(' Token received');
                    }
                } else {
                    alert(data.message || "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");
                }
            } catch (err) {
                console.error(" Fetch error:", err);
                alert("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É");
            }
        }

        function goToTourDetails(tourId) {
            if (!tourId) {
                console.error(' ID —Ç—É—Ä–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω');
                return;
            }

            console.log(` –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥–µ—Ç–∞–ª—è–º —Ç—É—Ä–∞ #${tourId}...`);

            // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–µ—Ç–∞–ª–µ–π —Å GET-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
            // –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç—å —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –≤–∞—à–∏–º [HttpGet("details")] –≤ C#
            window.location.href = `/tours/details?id=${tourId}`;
        }

        /**
         * –û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
         * @param {boolean} isAuthenticated - –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
* @param {object | null} user - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ null
*/
        function updateAuthUI(isAuthenticated, user) {
            // === –≠–õ–ï–ú–ï–ù–¢–´ DOM ===
            const authIcon = document.getElementById('auth-icon');
            const loginBtn = document.getElementById('login-btn');
            const logoutBtn = document.getElementById('logout-btn');
            const authModal = document.getElementById('auth-modal');

            // === –ü–£–¢–ò –ö –ò–ö–û–ù–ö–ê–ú (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç) ===
            const ICON_AUTHORIZED = 'src/AfterAuthUser.png';    //  –ê–≤–∞—Ç–∞—Ä–∫–∞ –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞
            const ICON_GUEST = 'src/BeforeAuthUser.png';           //  –î–µ—Ñ–æ–ª—Ç–Ω–∞—è –∞–≤–∞—Ç–∞—Ä–∫–∞

            if (isAuthenticated && user) {
                //  –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ –ê–í–¢–û–†–ò–ó–û–í–ê–ù

                console.log(` UI: –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫ ${user.username}`);

                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä–∫—É
                if (authIcon) {
                    authIcon.src = ICON_AUTHORIZED;
                    authIcon.alt = user.username;
                    authIcon.title = `${user.username} (${user.role})`;
                    authIcon.style.cursor = 'pointer';
                    authIcon.style.display = 'block';
                }


                if (authModal) authModal.style.display = 'none';

            } else {


                console.log(' UI: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω');

                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–≤–∞—Ç–∞—Ä–∫—É –Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—É—é
                if (authIcon) {
                    authIcon.src = ICON_GUEST;
                    authIcon.alt = '–ì–æ—Å—Ç—å';
                    authIcon.title = '–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç';
                    authIcon.style.cursor = 'pointer';
                    authIcon.style.display = 'block';
                }

            }
        }



        async function logout() {
            await fetch('/logout', { method: 'POST' });
            updateAuthUI(false, null);
            location.reload();
        }

        // === –ö–∞—Ä—Ç–∞ ===
        function openMapModal() {
            document.body.classList.add('map-open');
            document.getElementById('map-modal').style.display = 'flex';
        }
        function closeMapModal() {
            document.body.classList.remove('map-open');
            document.getElementById('map-modal').style.display = 'none';
        }

        // === –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM ===
        document.addEventListener('DOMContentLoaded', () => {
            // –°–ª–∞–π–¥–µ—Ä —Ü–µ–Ω
            updatePriceSlider();
            minPriceInput?.addEventListener('input', () => { updatePriceSlider(); });
            maxPriceInput?.addEventListener('input', () => { updatePriceSlider(); });

            async function checkAuthOnLoad() {
                try {
                    const res = await fetch('/check-auth', {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        credentials: 'include' // üî• –í–∞–∂–Ω–æ: –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º cookies
                    });

                    const data = await res.json();

                    console.log('üì° –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', data);

                    if (data.authenticated && data.user) {
                        updateAuthUI(true, data.user);
                    } else {
                        updateAuthUI(false, null);
                    }
                } catch (err) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', err);
                    updateAuthUI(false, null);
                }
            }

            // –ß–µ–∫–±–æ–∫—Å—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤


            document.querySelectorAll('.filter-group input[type="checkbox"]').forEach(cb => {
                cb.addEventListener('change', sendFiltersToServer);
            });

            // –ü–æ–∏—Å–∫ –æ—Ç–µ–ª—è (—Å –∑–∞–¥–µ—Ä–∂–∫–æ–π)
            document.getElementById('hotel-search')?.addEventListener('input',
                (e) => { clearTimeout(e.target._timer); e.target._timer = setTimeout(sendFiltersToServer, 300); }
            );

            // –ö–Ω–æ–ø–∫–∞ "–ù–∞–π—Ç–∏"
            document.querySelector('.search-btn')?.addEventListener('click', sendFiltersToServer);

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
            document.getElementById('auth-modal')?.addEventListener('click', (e) => {
                if (e.target.id === 'auth-modal') hideAuthModal();
            });
            document.getElementById('map-modal')?.addEventListener('click', (e) => {
                if (e.target.id === 'map-modal') closeMapModal();
            });

            document.addEventListener('DOMContentLoaded', checkAuthOnLoad);

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Esc
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    hideAuthModal();
                    closeMapModal();
                }
            });
        });
    </script>
</body>
</html>